---
layout: post
title: "Next.js í•™ìŠµ ì •ë¦¬"
date: 2020-08-15
author: Jason
categories: react
published: true
---

## ê°œìš”

ì´ë²ˆì— ì¢‹ì€ ê¸°íšŒë¡œ ê°œë°œì ëª¨ì„ì— í•©ë¥˜í•˜ê²Œ ë˜ì—ˆê³  ëª¨ì„ì—ì„œ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì— í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¡œ ì°¸ì—¬í•˜ê²Œ ë˜ì—ˆë‹¤.

í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ìŠ¤íƒì´ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•´ë³¸ ê²ƒì´ì§€ë§Œ Next.js ëŠ” ê·¸ ì¡´ì¬ë§Œ ì•Œê³  ìˆì—ˆì§€ ë°°ì›Œë³¸ì ì´ ì—†ë‹¤. í”„ë¡œì íŠ¸ì— ì–´ì„œ ê¸°ì—¬í•  ìˆ˜ ìˆì„ ë§Œí¼ì˜ ì‹¤ë ¥ì„ ê°–ê¸° ìœ„í•´ 8/15 - 8/16 ì£¼ë§ë™ì•ˆ ë¹¡ì„¸ê²Œ í•™ìŠµí•˜ê¸°ë¡œ í–ˆë‹¤.

## Next.js

Next.js ëŠ” React.js ì˜ í”„ë ˆì„ì›Œí¬ì´ë©° ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤.

- ë” ë¹ ë¥¸ page load ë¥¼ ìœ„í•œ ìë™ code splitting ê³¼ prefetching ì§€ì›

- [Built-in CSS](https://nextjs.org/docs/basic-features/built-in-css-support) ê³¼ Sass ì§€ì›, ê·¸ë¦¬ê³  ëª¨ë“  CSS-in-JS ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì§€ì›

- pre-rendering (static generation(SSG) ì™€ server-side rendering (SSR) ëª¨ë‘ì—ì„œ) ë¥¼ ì§€ì›í•œë‹¤.

- ì§ê´€ì ì¸ [page-based](https://nextjs.org/docs/basic-features/pages) routing ì‹œìŠ¤í…œ ([dynamic routes](https://nextjs.org/docs/routing/dynamic-routes)ë¥¼ ì§€ì›í•œë‹¤.)

- fast page load (component state ìœ ì§€í•œì±„ë¡œ page re-load ë¨) ë¥¼ ì§€ì›

- Serverless Function ì˜ API endpoint ë¥¼ build í•˜ê¸° ìœ„í•œ [API routes](https://nextjs.org/docs/api-routes/introduction) ì§€ì›

- í™•ì¥ ê°€ëŠ¥ì„±

<br>

ìœ„ì— ë‚˜ì—´ëœ ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ì”© ì¢€ ë” ìì„¸íˆ ì‚´í´ ë³´ì

## ğŸ“• code splitting ê³¼ prefetching

Next.js ëŠ” code splitting ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤. ì¦‰, ê° page ëŠ” í•´ë‹¹ page ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ render í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, home page ê°€ render ë˜ì–´ ìˆì„ ë•Œ, ë‹¤ë¥¸ page ì˜ code ë“¤ì€ serve ë˜ì§€ ì•ŠëŠ”ë‹¤.

**ì´ë¥¼ í†µí•´ ìš°ë¦¬ì˜ app ì— ìˆ˜ë°±ê°œì˜ page ê°€ ìˆë”ë¼ë„ home page ëŠ” ë¹ ë¥´ê²Œ load ëœë‹¤.**

ì´ëŠ” ê°ê°ì˜ page ê°€ ë…ë¦½ë˜ì–´ ìˆìŒì„ ëœ»í•œë‹¤. ë§Œì•½ í•œ page ì—ì„œ error ê°€ ë°œìƒí•´ë„ app ì˜ ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì€ ì—¬ì „íˆ ë™ì‘í•œë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ, Next.js ì˜ production build ì—ì„œëŠ” ë¸Œë¼ìš°ì €ì˜ í™”ë©´ ìƒ `Link` ì»´í¬ë„ŒíŠ¸ê°€ ë°œê²¬ë˜ë©´ ìë™ìœ¼ë¡œ **ì—°ê²°ëœ page ì˜ ì½”ë“œë“¤ì„ background ì— prefetch í•œë‹¤.** `Link` ë¥¼ í´ë¦­í•œ ìˆœê°„ì—ëŠ” ì´ë¯¸ background ì— ì—°ê²°ëœ page ê°€ load ë˜ì–´ ìˆë‹¤. ì´ëŠ” page ì „í™˜ ì†ë„ë¥¼ ë§¤ìš° ì¦ê°€ì‹œí‚¨ë‹¤.

> **ì£¼ì˜ ì‚¬í•­**
>
> - Next.js app ì—ì„œ ì™¸ë¶€ page ë¥¼ ì—°ê²°í•  ë•ŒëŠ” `<Link>` ê°€ ì•„ë‹Œ `<a>` ë¥¼ ì‚¬ìš©í•  ê²ƒ
> - `className` ê³¼ ê°™ì€ attribute ëŠ” `<Link>` ëŒ€ì‹  `<a>` ì— ì¶”ê°€í•  ê²ƒ

<br>

**Next.js ëŠ” code splitting, client-side navigation ê·¸ë¦¬ê³  prefetching (in production) ì„ í†µí•´ ìë™ìœ¼ë¡œ app ì„ ìµœì í™” ì‹œí‚¨ë‹¤.**

<br>

## ğŸ“• CSS Styling

Styling ë°©ë²• ë‘ ê°€ì§€

- **CSS-in-JS**  
  [styled-jsx](https://nextjs.org/learn/basics/assets-metadata-css/css-styling)  
  styled-components  
  emotion

- [CSS Modules](https://nextjs.org/learn/basics/assets-metadata-css/layout-component)

> SASS ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ 'sass' ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°›ì•„ì•¼í•œë‹¤. (`.scss` ë¡œ CSS Modules ì„ ì‚¬ìš©í•  ë•Œë„ ë§ˆì°¬ê°€ì§€)

<br>

**Global css ì‚¬ìš© ë°©ë²•**

[`pages/_app.js`]() ë¥¼ ìƒì„±í•˜ê³  css íŒŒì¼ì„ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ import í•œë‹¤.  
(`_app.js` ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ìë™ìœ¼ë¡œ ì¸ì‹ë˜ê³  render ëœë‹¤.)

pages/\_app.js ì½”ë“œ

```javascript
import "../styles/global.css";

export default function App({ Component, pageProps }) {
  return <Component {...pageProps} />;
}
```

**pages/\_app.js ë¥¼ ì¶”ê°€í•˜ë©´ dev server ë¥¼ ë°˜ë“œì‹œ restart í•´ì•¼í•œë‹¤.**

<br>

## ğŸ“• Pre-rendering and Data Fetching

Next.js ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  page ë¥¼ **pre-render** í•œë‹¤. ì¦‰, client-side JavaScript ëŒ€ì‹  Next.js ê°€ ê° page ì˜ HTML ì„ ë¯¸ë¦¬ ìƒì„±í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.  
**Pre-rendering ì€ ë” ì¢‹ì€ performance ì™€ SEO ë¥¼ ì´ëŒì–´ë‚¼ ìˆ˜ ìˆë‹¤.**

ìƒì„±ëœ ê°ê°ì˜ HTML ì€ í•´ë‹¹ page ì— í•„ìˆ˜ì ì¸ ìµœì†Œí•œì˜ JavaScript ì½”ë“œì™€ ê´€ë ¨ì´ ìˆë‹¤.  
page ê°€ browser ì— ì˜í•´ load ë˜ë©´, í•´ë‹¹ page ì˜ JavaScript ì½”ë“œê°€ ì‹¤í–‰ë˜ë©´ì„œ page ë¥¼ ì™„ì „íˆ interactive í•˜ê²Œ ë§Œë“ ë‹¤. (ì´ ì¼ë ¨ì˜ ê³¼ì •ì´ **Hydration** ì´ë‹¤.)

<br>

**âœ… Pre-rendering í™•ì¸ ë°©ë²•**

ì•„ë˜ì˜ ìˆœì„œë¥¼ ë”°ë¥¸ë‹¤.

1. browser ì—ì„œ JavaScript ë¥¼ disable ì‹œí‚¨ë‹¤. ([í¬ë¡¬ì—ì„œ í•˜ëŠ” ë°©ë²•](https://developers.google.com/web/tools/chrome-devtools/javascript/disable))

2. [ë§í¬](https://create-react-app.now-examples.now.sh/)ë¡œ ì´ë™í•´ë³¸ë‹¤.  
   í•´ë‹¹ page ëŠ” CRA ë¡œ build ëœ plain React.js app ì´ë‹¤. **ì¦‰, pre-render ê¸°ëŠ¥ì´ ì—†ì–´ JavaScript ê°€ disabled ëœ ì±„ë¡œëŠ” page ë¥¼ render í•  ìˆ˜ ì—†ë‹¤.**

3. ì´ë²ˆì—ëŠ” ë‹¤ìŒ [ë§í¬](https://next-learn-starter.now.sh/)ë¡œ ì´ë™í•œë‹¤.  
   **í•´ë‹¹ page ëŠ” Next.js ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë¯€ë¡œ JavaScript ê°€ disabled ëœ ì±„ë¡œë„ pre-render ëœ HTML ì„ ë¬¸ì œì—†ì´ ë³´ì—¬ì¤€ë‹¤.**

<br>

Pre-rendering ì˜ ë™ì‘ ì›ë¦¬ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í™•ì¸í•´ë³´ì.

- **Pre-rendering**  
   ìµœì´ˆ Load ì‹œ HTML ì„ Pre-render í•´ì„œ ë³´ì—¬ì¤€ë‹¤.  
   JS ê°€ ì‹¤í–‰ë˜ë©´ì„œ React ì»´í¬ë„ŒíŠ¸ê°€ ì´ˆê¸°í™” ë˜ê³  page ë¥¼ interactive í•˜ê²Œ ë§Œë“ ë‹¤. (**Hydration**)

  <a href="https://user-images.githubusercontent.com/52827441/90326486-c4b47900-dfc3-11ea-8892-2b02aee5cc0b.png" data-lightbox="pre-rendering" data-title="pre-rendering">
  <img src="https://user-images.githubusercontent.com/52827441/90326486-c4b47900-dfc3-11ea-8892-2b02aee5cc0b.png" alt="pre-rendering" style="height: 350px; width: auto;"/>
  </a>

- **No Pre-rendering (ìˆœìˆ˜ React app)**  
  ìµœì´ˆ Load ì‹œ render í•  HTML ì´ ì—†ë‹¤.  
  JS ê°€ ì‹¤í–‰ë˜ë©´ì„œ React ì»´í¬ë„ŒíŠ¸ê°€ ì´ˆê¸°í™” ë˜ê³  page ë¥¼ interactive í•˜ê²Œ ë§Œë“ ë‹¤. (**Hydration**)

  <a href="https://user-images.githubusercontent.com/52827441/90326529-35f42c00-dfc4-11ea-8c4a-6d56d6851e96.png" data-lightbox="no pre-rendering" data-title="no pre-rendering">
  <img src="https://user-images.githubusercontent.com/52827441/90326529-35f42c00-dfc4-11ea-8c4a-6d56d6851e96.png" alt="no pre-rendering" style="height: 350px; width: auto;"/>
  </a>

<br>

## Reference

[Next.js ê³µì‹ ë¬¸ì„œ](https://nextjs.org)
